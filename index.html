<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì§€êµ¬ê°€ ë§í–ˆë‹¤</title>

    <style>
        body {
            background-image: url('Aliens.jpg');
            color: white;
        }

        #phone {
            font-size: 100px;
            width: 60px;
            height: 60px;
            border-radius: 20%;
            position: absolute;
            top: 500px;
            left: 300px;
            cursor: pointer;
        }

        #win,
        #lose {
            position: absolute;
            top: 50px;
            left: 40%;

            font-size: 24px;



        }

        #target {
            width: 300px;
            height: 200px;
            background-color: #dc858550;


            position: absolute;
            top: 70px;
            /* ëª©í‘œ Y ì¢Œí‘œ */
            left: 200px;
            /* ëª©í‘œ X ì¢Œí‘œ */
            z-index: -1;
            /* ê³µ ì•„ë˜ì— ìœ„ì¹˜ */
        }




        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }


        #newplanet {
            animation-name: fadeIn;
            animation-delay: 8s;
            animation-fill-mode: both;
            background-color: white;
            background-size: 400px 300 px;
            position: absolute;
            top: 30%;
            left: 10%;


            /*ì´ˆê¸°ìƒíƒœ*/
            opacity: 0;
            font-size: 60px;
            color: rgb(77, 44, 44);
            display: block;
        }
    </style>
</head>

<body>
    <div id="win"></div>
    <div id="lose"></div>
    <div id="phone">ğŸ“±</div>
    <div id="target"></div>
    <a href="new planet.html" id="newplanet">ìƒˆ ë³´ê¸ˆìë¦¬ê°€ ì¤€ë¹„ë˜ì—ˆì–´ìš”. ì´ë™ ì¤‘...</a>
    <h>ì§€êµ¬ê°€ ë§í–ˆë‹¤! ì™¸ê³„ í–‰ì„±ìœ¼ë¡œ ì´ì‚¬ë¥¼ ê°€ì•¼í•©ë‹ˆë‹¤. <p>ì§ì„ ë‹¹ê²¨ì„œ ì™¸ê³„ í–‰ì„±ìœ¼ë¡œ ë³´ë‚´ì£¼ì„¸ìš”</p>ì™¸ê³„ì¸ ì‹œì•¼ì— ë“¤ì§€ ì•Šê²Œ ë³´ë‚´ì•¼ í•´ìš”!</h>

    <script>
        const phone = document.getElementById('phone');
        const wincaption = document.getElementById('win')
        const losecaption = document.getElementById('lose')
        const target = document.getElementById('target');

        let isDragging = false;
        let startX, startY;

        //í˜ì˜ ì„¸ê¸°
        const FORCE_MULTIPLIER = 14;


        // ê³µì´ ì°©ì§€í•  ìµœì†Œ ìµœëŒ€ ê±°ë¦¬ 
        const MIN_TRAVEL = 300;
        const MAX_TRAVEL = 600;

        const TARGET_AREA = {
            top: 50,
            bottom: 50 + 200, // top + height
            left: 200,
            right: 200 + 300 // left + width
        };

        function resetball() {
            phone.style.transition = 'none';
            wincaption.style.display = 'none';
            losecaption.style.display = 'none';

        }

        function winorlose(finalX, finalY) {
            //íƒ€ê²Ÿ ì¢Œí‘œ ì•ˆì— ê³µì˜ ì¤‘ì•™ì— ì™”ë‹ˆ?
            const isInsideTarget = (
                finalX >= TARGET_AREA.left &&
                finalX <= TARGET_AREA.right &&
                finalY >= TARGET_AREA.top &&
                finalY <= TARGET_AREA.bottom
            );

            if (isInsideTarget) {
                wincaption.textContent = `ë³´ë‚´ê¸° ì„±ê³µ!`;
                wincaption.style.display = 'block';
                losecaption.style.display = 'none';
                return true;
            }
            else {
                losecaption.textContent = `ë³´ë‚´ê¸° ì‹¤íŒ¨!`;
                losecaption.style.display = 'block';
                wincaption.style.display = 'none';
                return false;
            }

        }


        phone.addEventListener('mousedown', (e) => {
            isDragging = true;
            startX = phone.offsetLeft + phone.offsetWidth / 2;
            startY = phone.offsetTop + phone.offsetHeight / 2;
            e.preventDefault();
            phone.style.transition = 'none';
        });

        document.addEventListener('mousemove', (e) => {
            if (!isDragging) return;
            phone.style.left = (e.clientX - phone.offsetWidth / 2) + 'px';
            phone.style.top = (e.clientY - phone.offsetHeight / 2) + 'px';
        });






        document.addEventListener('mouseup', (e) => {
            if (!isDragging) return;
            isDragging = false; //ë“œë˜ê·¸ë


            let endX = e.clientX;
            let endY = e.clientY;


            //ë˜ì§ˆ ë°©í–¥ì„ ê³„ì‚°! = vector
            let directionX = (startX - endX) * FORCE_MULTIPLIER;
            let directionY = (startY - endY) * FORCE_MULTIPLIER;

            // Magnitude=í˜ì˜ í¬ê¸° ê³„ì‚°
            let originalMagnitude = Math.sqrt(
                (directionX * directionX) + (directionY * directionY)
            );

            //ì´ ë‚ ì•„ê°ˆ ê±°ë¦¬ ëœë¤
            const randomTravelRange = MAX_TRAVEL - MIN_TRAVEL;
            const randomMagnitude = Math.random() * randomTravelRange + MIN_TRAVEL;


            //ê³µì´ ë‚ ì•„ê°ˆ ìµœì¢… ë²¡í„° ê³„ì‚°ì„ ìœ„í•´ ì´ˆê¸°í™”
            let movingX = 0;
            let movingY = 0;
            let finalX = phone.offsetLeft + phone.offsetWidth / 2;
            let finalY = phone.offsetTop + phone.offsetHeight / 2;



            // ë‹¹ê¸´ í˜ì´ 0ì´ ì•„ë‹ ë•Œë§Œ ì ìš©
            if (originalMagnitude > 0) {

                // (ëœë¤ í¬ê¸° / ì›ë˜ í¬ê¸°) ë¹„ìœ¨ì„ ê° ë°©í–¥ ë²¡í„°ì— ê³±í•´ í¬ê¸°ë¥¼ ì¡°ì •í•©ë‹ˆë‹¤.
                const scaleFactor = randomMagnitude / originalMagnitude;
                movingX = directionX * scaleFactor;
                movingY = directionY * scaleFactor;

                //ìµœì¢…ë„ì°©ì¢Œí‘œ
                finalX = phone.offsetLeft + movingX + (phone.offsetWidth / 2);
                finalY = phone.offsetTop + movingY + (phone.offsetHeight / 2);

                // íƒ€ê²Ÿ ì¢Œí‘œ ê¸°ì¤€ìœ¼ë¡œ ìŠ¹íŒ¨


                phone.style.transition = 'transform 1s ease-out';
                phone.style.transform = `translate(${movingX}px, ${movingY}px)`;
            }

            setTimeout(() => {
                winorlose(finalX, finalY);

                setTimeout(resetball, 3000);

            }, 1000);
        });



    </script>
</body>

</html>